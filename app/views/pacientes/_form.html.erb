<%= form_with(model: paciente,
              local: true,
              html: { style: "display: block; border: 1px solid #e4e7ef; border-radius: 12px; background: #fff; box-shadow: 0 2px 6px rgba(15,23,42,0.05); overflow: hidden;" }) do |form| %>
  <div style="padding: 1.25rem 1.5rem; background: #f4f6fb; border-bottom: 1px solid #e4e7ef; display: flex; justify-content: space-between; align-items: center;">
    <div>
      <div style="font-size: 0.75rem; text-transform: uppercase; letter-spacing: 0.06em; font-weight: 600; color: #636a7a;">
        Cadastro de paciente
      </div>
      <div style="font-size: 1.2rem; font-weight: 600; color: #1f2937; margin-top: 0.3rem;">
        <%= paciente.new_record? ? "Novo registro assistencial" : "Atualização cadastral" %>
      </div>
    </div>
    <i class="fas fa-heartbeat" style="font-size: 2rem; color: #10b981;"></i>
  </div>

  <div style="padding: 1.5rem;">
    <% if paciente.errors.any? %>
      <div style="border: 1px solid #fecaca; background: #fef2f2; color: #991b1b; border-radius: 8px; padding: 0.9rem 1rem; margin-bottom: 1.25rem;">
        <div style="font-weight: 600; margin-bottom: 0.5rem;">
          <i class="fas fa-exclamation-triangle"></i>
          <%= pluralize(paciente.errors.count, "erro impede", plural: "erros impedem") %> o salvamento:
        </div>
        <ul style="margin: 0; padding-left: 1.1rem;">
          <% paciente.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div style="margin-bottom: 1.5rem;">
      <span style="font-weight: 600; color: #1f2937; letter-spacing: 0.06em; text-transform: uppercase; font-size: 0.8rem;">
        Dados pessoais
      </span>
      <p style="margin: 0.35rem 0 0; font-size: 0.85rem; color: #6b7280;">
        Registre informações conforme documento de identificação e dados sociais do paciente.
      </p>
    </div>

    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.25rem;">
      <div style="min-width: 0;">
        <%= form.label :nome, "Nome completo", style: "display: block; font-size: 0.75rem; font-weight: 600; color: #6b7280; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.35rem;" %>
        <%= form.text_field :nome, placeholder: "Nome completo", style: "width: 100%; border: 1px solid #e4e7ef; border-radius: 8px; padding: 0.75rem 0.9rem; font-size: 0.95rem; color: #1f2937;" %>
      </div>

      <div style="min-width: 0;">
        <%= form.label :nome_social, "Nome social (opcional)", style: "display: block; font-size: 0.75rem; font-weight: 600; color: #6b7280; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.35rem;" %>
        <%= form.text_field :nome_social, placeholder: "Como o paciente prefere ser chamado", style: "width: 100%; border: 1px solid #e4e7ef; border-radius: 8px; padding: 0.75rem 0.9rem; font-size: 0.95rem; color: #1f2937;" %>
      </div>

      <div style="min-width: 0;">
        <%= form.label :data_nascimento, "Data de nascimento", style: "display: block; font-size: 0.75rem; font-weight: 600; color: #6b7280; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.35rem;" %>
        <%= form.date_field :data_nascimento, style: "width: 100%; border: 1px solid #e4e7ef; border-radius: 8px; padding: 0.7rem 0.9rem; font-size: 0.95rem; color: #1f2937; background: #fff;" %>
      </div>

      <div style="min-width: 0;">
        <%= form.label :sexo, "Sexo", style: "display: block; font-size: 0.75rem; font-weight: 600; color: #6b7280; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.35rem;" %>
        <%= form.select :sexo,
                        [["Masculino", "masculino"], ["Feminino", "feminino"], ["Indefinido", "indefinido"]],
                        { include_blank: "Selecione..." },
                        { style: "width: 100%; border: 1px solid #e4e7ef; border-radius: 8px; padding: 0.7rem 0.9rem; font-size: 0.95rem; color: #1f2937; background: #fff;" } %>
      </div>

      <div style="min-width: 0;">
        <%= form.label :raca, "Raça/Cor", style: "display: block; font-size: 0.75rem; font-weight: 600; color: #6b7280; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.35rem;" %>
        <%= form.select :raca,
                        [["Branca", "branca"],
                         ["Preta", "preta"],
                         ["Parda", "parda"],
                         ["Amarela", "amarela"],
                         ["Indígena", "indigena"],
                         ["Não declarada", "nao_declarada"]],
                        { include_blank: "Selecione..." },
                        { style: "width: 100%; border: 1px solid #e4e7ef; border-radius: 8px; padding: 0.7rem 0.9rem; font-size: 0.95rem; color: #1f2937; background: #fff;" } %>
      </div>
    </div>

    <div style="margin: 2rem 0 1.5rem;">
      <span style="font-weight: 600; color: #1f2937; letter-spacing: 0.06em; text-transform: uppercase; font-size: 0.8rem;">
        Documentos oficiais
      </span>
      <p style="margin: 0.35rem 0 0; font-size: 0.85rem; color: #6b7280;">
        Utilize apenas números e informe o órgão expedidor sempre que disponível.
      </p>
    </div>

    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.25rem;">
      <div style="min-width: 0;">
        <%= form.label :cpf, "CPF", style: "display: block; font-size: 0.75rem; font-weight: 600; color: #6b7280; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.35rem;" %>
        <%= form.text_field :cpf,
                            placeholder: "000.000.000-00",
                            inputmode: "numeric",
                            maxlength: 14,
                            style: "width: 100%; border: 1px solid #e4e7ef; border-radius: 8px; padding: 0.75rem 0.9rem; font-size: 0.95rem; color: #1f2937;",
                            data: { controller: "cpf-mask", action: "input->cpf-mask#format blur->cpf-mask#format" } %>
      </div>

      <div style="min-width: 0;">
        <%= form.label :rg, "RG", style: "display: block; font-size: 0.75rem; font-weight: 600; color: #6b7280; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.35rem;" %>
        <%= form.text_field :rg, placeholder: "Somente números", inputmode: "numeric", style: "width: 100%; border: 1px solid #e4e7ef; border-radius: 8px; padding: 0.75rem 0.9rem; font-size: 0.95rem; color: #1f2937;" %>
      </div>

      <div style="min-width: 0;">
        <%= form.label :org_exp, "Órgão expedidor", style: "display: block; font-size: 0.75rem; font-weight: 600; color: #6b7280; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.35rem;" %>
        <%= form.text_field :org_exp, placeholder: "UF/Órgão", style: "width: 100%; border: 1px solid #e4e7ef; border-radius: 8px; padding: 0.75rem 0.9rem; font-size: 0.95rem; color: #1f2937;" %>
      </div>

      <div style="min-width: 0;">
        <%= form.label :cartao_sus, "Cartão SUS", style: "display: block; font-size: 0.75rem; font-weight: 600; color: #6b7280; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.35rem;" %>
        <%= form.text_field :cartao_sus,
                            placeholder: "000 0000 0000 0000",
                            inputmode: "numeric",
                            maxlength: 18,
                            style: "width: 100%; border: 1px solid #e4e7ef; border-radius: 8px; padding: 0.75rem 0.9rem; font-size: 0.95rem; color: #1f2937;",
                            data: { controller: "cartao-sus-mask", action: "input->cartao-sus-mask#format blur->cartao-sus-mask#format" } %>
      </div>
    </div>

    <div style="margin: 2rem 0 1.5rem%;">
      <span style="font-weight: 600; color: #1f2937; letter-spacing: 0.06em; text-transform: uppercase; font-size: 0.8rem;">
        Contato
      </span>
      <p style="margin: 0.35rem 0 0; font-size: 0.85rem; color: #6b7280;">
        Informe canais utilizados pela equipe para acompanhar o paciente.
      </p>
    </div>

    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.25rem;">
      <div style="min-width: 0;">
        <%= form.label :celular, "Celular", style: "display: block; font-size: 0.75rem; font-weight: 600; color: #6b7280; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.35rem;" %>
        <%= form.text_field :celular,
                            placeholder: "(99) 99999-9999",
                            inputmode: "tel",
                            style: "width: 100%; border: 1px solid #e4e7ef; border-radius: 8px; padding: 0.75rem 0.9rem; font-size: 0.95rem; color: #1f2937;",
                            data: { controller: "phone-mask", action: "input->phone-mask#format blur->phone-mask#format" } %>
      </div>

      <div style="min-width: 0;">
        <%= form.label :email, "Email", style: "display: block; font-size: 0.75rem; font-weight: 600; color: #6b7280; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.35rem;" %>
        <%= form.email_field :email, placeholder: "nome@hospital.com", style: "width: 100%; border: 1px solid #e4e7ef; border-radius: 8px; padding: 0.75rem 0.9rem; font-size: 0.95rem; color: #1f2937;" %>
      </div>
    </div>

    <div style="margin: 2rem 0 1.5rem;">
      <span style="font-weight: 600; color: #1f2937; letter-spacing: 0.06em; text-transform: uppercase; font-size: 0.8rem;">
        Outras informações
      </span>
      <p style="margin: 0.35rem 0 0; font-size: 0.85rem; color: #6b7280;">
        Dados complementares de contexto sociofamiliar e acompanhamento.
      </p>
    </div>

    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.25rem;">
      <div style="min-width: 0;">
        <%= form.label :profissao, "Profissão", style: "display: block; font-size: 0.75rem; font-weight: 600; color: #6b7280; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.35rem;" %>
        <%= form.text_field :profissao, style: "width: 100%; border: 1px solid #e4e7ef; border-radius: 8px; padding: 0.75rem 0.9rem; font-size: 0.95rem; color: #1f2937;" %>
      </div>

      <div style="min-width: 0;">
        <%= form.label :escolaridade, "Escolaridade", style: "display: block; font-size: 0.75rem; font-weight: 600; color: #6b7280; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.35rem;" %>
        <%= form.select :escolaridade,
                        [["Sem instrução", "sem_instrucao"],
                         ["Fundamental incompleto", "fundamental_incompleto"],
                         ["Fundamental completo", "fundamental_completo"],
                         ["Médio incompleto", "medio_incompleto"],
                         ["Médio completo", "medio_completo"],
                         ["Superior incompleto", "superior_incompleto"],
                         ["Superior completo", "superior_completo"],
                         ["Pós-graduação", "pos_graduacao"]],
                        { include_blank: "Selecione..." },
                        { style: "width: 100%; border: 1px solid #e4e7ef; border-radius: 8px; padding: 0.7rem 0.9rem; font-size: 0.95rem; color: #1f2937; background: #fff;" } %>
      </div>

      <div style="min-width: 0;">
        <%= form.label :estado_civil, "Estado civil", style: "display: block; font-size: 0.75rem; font-weight: 600; color: #6b7280; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.35rem;" %>
        <%= form.select :estado_civil,
                        [["Solteiro(a)", "solteiro"],
                         ["Casado(a)", "casado"],
                         ["União estável", "uniao_estavel"],
                         ["Divorciado(a)", "divorciado"],
                         ["Separado(a)", "separado"],
                         ["Viúvo(a)", "viuvo"]],
                        { include_blank: "Selecione..." },
                        { style: "width: 100%; border: 1px solid #e4e7ef; border-radius: 8px; padding: 0.7rem 0.9rem; font-size: 0.95rem; color: #1f2937; background: #fff;" } %>
      </div>

      <div style="min-width: 0;">
        <%= form.label :nacionalidade, "Nacionalidade", style: "display: block; font-size: 0.75rem; font-weight: 600; color: #6b7280; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.35rem;" %>
        <%= form.text_field :nacionalidade, style: "width: 100%; border: 1px solid #e4e7ef; border-radius: 8px; padding: 0.75rem 0.9rem; font-size: 0.95rem; color: #1f2937;" %>
      </div>

      <div style="min-width: 0;">
        <%= form.label :naturalidade, "Naturalidade", style: "display: block; font-size: 0.75rem; font-weight: 600; color: #6b7280; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.35rem;" %>
        <%= form.text_field :naturalidade, style: "width: 100%; border: 1px solid #e4e7ef; border-radius: 8px; padding: 0.75rem 0.9rem; font-size: 0.95rem; color: #1f2937;" %>
      </div>

      <div style="min-width: 0;">
        <%= form.label :nome_mae, "Nome da mãe", style: "display: block; font-size: 0.75rem; font-weight: 600; color: #6b7280; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.35rem;" %>
        <%= form.text_field :nome_mae, style: "width: 100%; border: 1px solid #e4e7ef; border-radius: 8px; padding: 0.75rem 0.9rem; font-size: 0.95rem; color: #1f2937;" %>
      </div>

      <div style="min-width: 0;">
        <%= form.label :horario, "Horário", style: "display: block; font-size: 0.75rem; font-weight: 600; color: #6b7280; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.35rem;" %>
        <%= form.time_field :horario, style: "width: 100%; border: 1px solid #e4e7ef; border-radius: 8px; padding: 0.7rem 0.9rem; font-size: 0.95rem; color: #1f2937; background: #fff;" %>
      </div>

      <div style="min-width: 0; grid-column: 1 / -1;">
        <%= form.label :observacao, "Observações", style: "display: block; font-size: 0.75rem; font-weight: 600; color: #6b7280; text-transform: uppercase; letter-spacing: 0.05em; margin-bottom: 0.35rem;" %>
        <%= form.text_area :observacao, placeholder: "Registre informações clínicas, sociais ou recomendações importantes.", style: "width: 100%; border: 1px solid #e4e7ef; border-radius: 8px; padding: 0.9rem; font-size: 0.95rem; color: #1f2937; min-height: 110px;" %>
      </div>
    </div>
  </div>

  <div style="padding: 1.1rem 1.5rem; border-top: 1px solid #e4e7ef; background: #f9fafc; text-align: right;">
    <%= link_to pacientes_path, style: "margin-right: 0.75rem; padding: 0.65rem 1.2rem; border: 1px solid #e4e7ef; border-radius: 8px; font-weight: 600; color: #4b5563; text-decoration: none;" do %>
      Cancelar
    <% end %>
    <%= form.submit paciente.new_record? ? "Salvar paciente" : "Atualizar paciente", style: "padding: 0.7rem 1.4rem; background: #2563eb; color: #fff; border: none; border-radius: 8px; font-weight: 600; letter-spacing: 0.03em; cursor: pointer; box-shadow: 0 2px 4px rgba(37,99,235,0.35);" %>
  </div>
<% end %>
