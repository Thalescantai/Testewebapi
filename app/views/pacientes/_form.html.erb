<%= form_with(model: paciente, class: "card shadow-sm border-0 overflow-hidden", local: true) do |form| %>
  <div class="card-header bg-primary bg-gradient text-white">
    <div class="d-flex align-items-center justify-content-between">
      <div>
        <div class="text-uppercase small text-white-50 fw-semibold mb-1">Cadastro de Paciente</div>
        <h5 class="mb-0">
          <i class="fas fa-user me-2"></i>
          <%= paciente.new_record? ? "Novo registro" : "Atualiza√ß√£o cadastral" %>
        </h5>
      </div>
      <i class="fas fa-heartbeat fa-2x text-white-50"></i>
    </div>
  </div>

  <div class="card-body">
    <% if paciente.errors.any? %>
      <div class="alert alert-danger">
        <h6 class="fw-bold mb-2">
          <i class="fas fa-exclamation-triangle me-1"></i>
          Erros encontrados:
        </h6>
        <ul class="mb-0">
          <% paciente.errors.full_messages.each do |message| %>
            <li><%= message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <!-- üßç Dados Pessoais -->
    <div class="mb-4">
      <span class="section-title mb-2">
        <i class="fas fa-id-card"></i> Dados pessoais
      </span>
      <p class="text-muted small mb-3">Preencha conforme documento de identifica√ß√£o do paciente.</p>
    </div>
    <div class="row g-3">
      <div class="col-md-6">
        <div class="form-floating">
          <%= form.text_field :nome, class: "form-control", placeholder: "Nome completo" %>
          <%= form.label :nome, "Nome completo" %>
        </div>
      </div>

      <div class="col-md-6">
        <div class="form-floating">
          <%= form.text_field :nome_social, class: "form-control", placeholder: "Nome social" %>
          <%= form.label :nome_social, "Nome social (opcional)" %>
        </div>
      </div>

      <div class="col-md-4">
        <div class="form-floating">
          <%= form.date_field :data_nascimento, class: "form-control" %>
          <%= form.label :data_nascimento, "Data de Nascimento" %>
        </div>
      </div>

      <div class="col-md-4">
        <div class="form-floating">
          <%= form.select :sexo,
                [["Masculino", "masculino"], ["Feminino", "feminino"], ["Indefinido", "indefinido"]],
                { include_blank: "Selecione..." },
                class: "form-select" %>
          <%= form.label :sexo, "Sexo" %>
        </div>
      </div>

      <div class="col-md-4">
        <div class="form-floating">
          <%= form.text_field :raca, class: "form-control", placeholder: "Ra√ßa/Cor" %>
          <%= form.label :raca, "Ra√ßa/Cor" %>
        </div>
      </div>
    </div>

    <!-- üìÑ Documentos -->
    <div class="mt-4 mb-4">
      <span class="section-title mb-2">
        <i class="fas fa-file-medical"></i> Documentos oficiais
      </span>
      <p class="text-muted small mb-3">Utilize apenas n√∫meros. Informe o √≥rg√£o expedidor quando dispon√≠vel.</p>
    </div>
    <div class="row g-3">
      <div class="col-md-4">
        <div class="form-floating">
          <%= form.text_field :cpf, class: "form-control", placeholder: "Somente n√∫meros", inputmode: "numeric" %>
          <%= form.label :cpf, "CPF" %>
        </div>
      </div>

      <div class="col-md-4">
        <div class="form-floating">
          <%= form.text_field :rg, class: "form-control", placeholder: "Somente n√∫meros", inputmode: "numeric" %>
          <%= form.label :rg, "RG" %>
        </div>
      </div>

      <div class="col-md-4">
        <div class="form-floating">
          <%= form.text_field :org_exp, class: "form-control", placeholder: "√ìrg√£o expedidor" %>
          <%= form.label :org_exp, "Org√£o Expedidor" %>
        </div>
      </div>

      <div class="col-md-6">
        <div class="form-floating">
          <%= form.text_field :cartao_sus, class: "form-control", placeholder: "Digite o cart√£o SUS" %>
          <%= form.label :cartao_sus, "Cart√£o SUS" %>
        </div>
      </div>
    </div>

    <!-- ‚òéÔ∏è Contato -->
    <div class="mt-4 mb-4">
      <span class="section-title mb-2">
        <i class="fas fa-phone"></i> Contato
      </span>
      <p class="text-muted small mb-3">Informe os canais utilizados para contato com a equipe da Santa Casa.</p>
    </div>
    <div class="row g-3">
      <div class="col-md-4">
        <div class="form-floating">
          <%= form.text_field :celular, class: "form-control", placeholder: "(99) 99999-9999", inputmode: "tel" %>
          <%= form.label :celular, "Celular" %>
        </div>
      </div>

      <div class="col-md-8">
        <div class="form-floating">
          <%= form.email_field :email, class: "form-control", placeholder: "nome@email.com" %>
          <%= form.label :email, "Email" %>
        </div>
      </div>
    </div>

    <!-- üåç Outras Informa√ß√µes -->
    <div class="mt-4 mb-4">
      <span class="section-title mb-2">
        <i class="fas fa-globe"></i> Outras informa√ß√µes
      </span>
      <p class="text-muted small mb-3">Campos complementares com dados sociais e familiares.</p>
    </div>
    <div class="row g-3">
      <div class="col-md-4">
        <div class="form-floating">
          <%= form.text_field :profissao, class: "form-control" %>
          <%= form.label :profissao, "Profiss√£o" %>
        </div>
      </div>

      <div class="col-md-4">
        <div class="form-floating">
          <%= form.text_field :escolaridade, class: "form-control" %>
          <%= form.label :escolaridade, "Escolaridade" %>
        </div>
      </div>

      <div class="col-md-4">
        <div class="form-floating">
          <%= form.text_field :estado_civil, class: "form-control" %>
          <%= form.label :estado_civil, "Estado Civil" %>
        </div>
      </div>

      <div class="col-md-4">
        <div class="form-floating">
          <%= form.text_field :nacionalidade, class: "form-control" %>
          <%= form.label :nacionalidade, "Nacionalidade" %>
        </div>
      </div>

      <div class="col-md-4">
        <div class="form-floating">
          <%= form.text_field :naturalidade, class: "form-control" %>
          <%= form.label :naturalidade, "Naturalidade" %>
        </div>
      </div>

      <div class="col-md-4">
        <div class="form-floating">
          <%= form.text_field :nome_mae, class: "form-control" %>
          <%= form.label :nome_mae, "Nome da M√£e" %>
        </div>
      </div>

      <div class="col-md-3">
        <div class="form-floating">
          <%= form.time_field :horario, class: "form-control" %>
          <%= form.label :horario, "Hor√°rio" %>
        </div>
      </div>

      <div class="col-12">
        <div class="form-floating">
          <%= form.text_area :observacao, class: "form-control", style: "height: 100px;", placeholder: "Observa√ß√µes..." %>
          <%= form.label :observacao, "Observa√ß√µes" %>
        </div>
      </div>
    </div>
  </div>

  <div class="card-footer bg-light text-end">
    <%= link_to pacientes_path, class: "btn btn-outline-secondary btn-lg me-2" do %>
      <i class="fas fa-times me-1"></i> Cancelar
    <% end %>

    <%= form.submit "Salvar paciente", class: "btn btn-primary btn-lg px-4 fw-semibold shadow-sm" %>
  </div>
<% end %>
